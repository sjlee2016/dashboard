(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=a(14),s=a(28),i=a(9),u=a.n(i),m=a(15),p=a(29),d=a.n(p),g=a(67),f=a.n(g),h=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=f.a.v4();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout(function(){return n({type:"REMOVE_ALERT",payload:r})},a)}},E=function(e){e?d.a.defaults.headers.common["x-auth-token"]=e:delete d.a.defaults.headers.common["x-auth-token"]},b=function(){return function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("loading user.."),localStorage.token){e.next=3;break}return e.abrupt("return");case 3:localStorage.token&&E(localStorage.token),d.a.get("/api/auth/").then(function(e){return t({type:"USER_LOADED",payload:e.data})}).catch(function(e){if(e.response)switch(e.response.status){case 404:t(h("Server Error","danger"));break;default:t(h("Internal Error","danger"))}t({type:"AUTH_ERROR"})});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},v=a(147),y=a(146),w=a(145),k=a(74),x=a(140),O=a(10),S=Object(O.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},{logOut:function(e){return function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOG_OUT"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=e.isAuthenticated,a=e.logOut,n=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return t?r.a.createElement(v.a,{bg:"dark",variant:"dark",expand:"lg",fixed:"top"},r.a.createElement(v.a.Brand,{href:"/"},"Trip-Planner"),r.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(y.a,{className:"mr-auto"},r.a.createElement(y.a.Link,{href:"/"},"Home"),r.a.createElement(y.a.Link,{href:"/manage"},"Manage Group"),r.a.createElement(y.a.Link,{href:"/profile"},"Profile"),r.a.createElement(y.a.Link,{onClick:n},"Logout")),r.a.createElement(w.a,{inline:!0},r.a.createElement(k.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(x.a,{variant:"outline-success"},"Search")))):r.a.createElement(v.a,{bg:"dark",variant:"dark",expand:"lg",fixed:"top"},r.a.createElement(v.a.Brand,{href:"/"},"Trip-Planner"),r.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(y.a,{className:"mr-auto"},r.a.createElement(y.a.Link,{href:"/"},"Home"),r.a.createElement(y.a.Link,{href:"/register"},"Register"),r.a.createElement(y.a.Link,{href:"/login"},"Login")),r.a.createElement(w.a,{inline:!0},r.a.createElement(k.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(x.a,{variant:"outline-success"},"Search"))))});var A=Object(O.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,state:e.auth}})(function(e){var t=e.isAuthenticated,a=e.state;if(t){var n=null;return null!=a.user&&(n=a.user.name),r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"x-large"},"Trip-Planner"),r.a.createElement("p",{className:"lead"},"Welcome Back ",n))))}return r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"x-large"},"Trip-Planner"),r.a.createElement("p",{className:"lead"},"making plans can be enjoyable with trip-planner"),r.a.createElement("div",{className:"buttons"},r.a.createElement(l.b,{to:"/register",className:"btn btn-primary"},"Sign Up "),r.a.createElement(l.b,{to:"/login",className:"btn btn-light"},"Login ")))))}),j=a(32),L=a(24),N=a(45),R=a(76),C=a.n(R),T=a(148),I=a(26),_=Object(O.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},{setAlert:h,login:function(e){var t=e.email,a=e.password;return function(){var e=Object(m.a)(u.a.mark(function e(n){var r,c,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}},c=JSON.stringify({email:t,password:a}),e.prev=2,e.next=5,d.a.post("/api/auth/login",c,r);case 5:o=e.sent,n({type:"LOGIN_SUCCESS",payload:o.data}),e.next=19;break;case 9:if(e.prev=9,e.t0=e.catch(2),!e.t0.response){e.next=18;break}e.t1=e.t0.response.status,e.next=404===e.t1?15:17;break;case 15:return n(h("Server Error","danger")),e.abrupt("break",18);case 17:n(h("Internal Error","danger"));case 18:n({type:"LOGIN_FAIL"});case 19:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},loadUser:b})(function(e){var t=e.setAlert,a=e.login,c=e.isAuthenticated,o=e.loadUser,l={cover:{alignSelf:"center",height:100,width:100,borderWidth:1,borderRadius:10},button:{width:10},card:{width:"30rem",justifyContent:"center",alignItems:"center",marginLeft:"auto",marginRight:"auto"}},i=Object(n.useState)({email:"",password:""}),p=Object(N.a)(i,2),d=p[0],g=p[1],f=d.email,h=d.password,E=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g(Object(L.a)({},d,Object(j.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(c)return r.a.createElement(s.a,{to:"/"});var b=function(){var e=Object(m.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("submitted"),n.preventDefault(),null!=f&&null!=h){e.next=6;break}t("Email or password is missing","danger"),e.next=9;break;case 6:return a({email:f,password:h}),o(),e.abrupt("return",r.a.createElement(s.a,{to:"/"}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{styles:{display:"flex",justifyContent:"center"}},r.a.createElement(T.a,{style:l.card},r.a.createElement(T.a.Img,{variant:"top",src:C.a,style:l.cover}),r.a.createElement("p",{className:"h5 text-center mb-4"},"Login"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(I.a,{type:"text",icon:"envelope",group:!0,error:"wrong",success:"right",label:"email",placeholder:"Email",name:"email",onChange:function(e){E(e)},required:!0}),r.a.createElement(I.a,{type:"password",icon:"lock",group:!0,error:"wrong",success:"right",label:"password",placeholder:"password",name:"password",onChange:function(e){E(e)},required:!0})),r.a.createElement("br",null),r.a.createElement(x.a,{type:"submit",size:"sm",variant:"success",styles:l.button,onClick:function(e){return b(e)}}," Submit "),r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Text,null,"Already Have an account?"),r.a.createElement(T.a.Link,{href:"/login"},"Login"))))}),U=a(80),G=a.n(U),D={cover:{alignSelf:"center",height:100,width:100,borderWidth:1,borderRadius:10},button:{width:10},card:{width:"30rem",justifyContent:"center",alignItems:"center",marginLeft:"auto",marginRight:"auto"}},q=Object(O.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},{setAlert:h,register:function(e){var t=e.name,a=e.email,n=e.password;return function(){var e=Object(m.a)(u.a.mark(function e(r){var c,o,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}},o=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,d.a.post("/api/users/register",o,c);case 5:l=e.sent,r({type:"REGISTER_SUCCESS",payload:l.data}),e.next=21;break;case 9:if(e.prev=9,e.t0=e.catch(2),!e.t0.response){e.next=20;break}e.t1=e.t0.response.status,e.next=404===e.t1?15:400===e.t1?17:19;break;case 15:return r(h("Server Error","danger")),e.abrupt("break",20);case 17:return r(h("Account already exists for this email","danger")),e.abrupt("break",20);case 19:r(h("Internal Error","danger"));case 20:r({type:"REGISTER_FAIL"});case 21:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=e.setAlert,a=e.register,c=e.isAuthenticated,o=Object(n.useState)({name:"",email:"",password:"",password2:""}),l=Object(N.a)(o,2),i=l[0],p=l[1],d=i.name,g=i.email,f=i.password,h=i.password2,E=function(e){return p(Object(L.a)({},i,Object(j.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(m.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f===h){e.next=5;break}t("Password do not match","danger"),e.next=8;break;case 5:return a({name:d,email:g,password:f}),b(),e.abrupt("return",r.a.createElement(s.a,{to:"/"}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{styles:{display:"flex",justifyContent:"center"}},r.a.createElement(T.a,{style:D.card},r.a.createElement(T.a.Img,{variant:"top",src:G.a,style:D.cover}),r.a.createElement("p",{className:"h5 text-center mb-4"},"Register"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(I.a,{type:"text",icon:"user",group:!0,error:"wrong",success:"right",label:"name",placeholder:"Name",name:"name",onChange:function(e){E(e)},required:!0}),r.a.createElement(I.a,{type:"text",icon:"envelope",group:!0,error:"wrong",success:"right",label:"email",placeholder:"Email",name:"email",onChange:function(e){E(e)},required:!0}),r.a.createElement(I.a,{type:"password",icon:"lock",group:!0,error:"wrong",success:"right",label:"password",placeholder:"password",name:"password",onChange:function(e){E(e)},required:!0}),r.a.createElement(I.a,{type:"password",icon:"exclamation-triangle",group:!0,error:"wrong",success:"right",label:"Confirm your password",placeholder:"Confirm your password",name:"password2",onChange:function(e){E(e)},required:!0})),r.a.createElement("br",null),r.a.createElement(x.a,{type:"submit",size:"sm",variant:"success",styles:D.button,onClick:function(e){return v(e)}}," Submit "),r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Text,null,"Already Have an account?"),r.a.createElement(T.a.Link,{href:"/login"},"Login"))))}),B=Object(O.b)(function(e){return{alerts:e.alert}})(function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map(function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType)},e.msg)})}),H=a(141),P=a(142),F=a(143),J=a(144);var M=Object(O.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,state:e.auth}},{loadUser:b})(function(e){var t=e.isAuthenticated,a=e.state;return console.log(t),console.log(a),t&&null!=a.user?r.a.createElement(H.a,null,r.a.createElement(P.a,{sm:!0},r.a.createElement(F.a,{xs:3,md:2},r.a.createElement(J.a,{src:a.user.avatar,rounded:!0}))),r.a.createElement(P.a,{sm:!0},a.user.name),r.a.createElement(P.a,{sm:!0},a.user.email)):r.a.createElement("div",null,"you are not logged in")}),W=(a(132),a(22)),z=a(83),V=a(84),K=a(85),Q=[],X={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},Y=Object(W.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(K.a)(e),[n]);case"REMOVE_ALERT":return e.filter(function(e){return e.id!==n});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch("USER_LOADED"===a&&(console.log("user is loaded"),console.log(n)),a){case"USER_LOADED":return Object(L.a)({},e,{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),Object(L.a)({},e,n,{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOG_OUT":return localStorage.removeItem("token"),Object(L.a)({},e,{token:null,isAuthenticated:!1,loading:!1});default:return e}}}),Z=[V.a],$=Object(W.createStore)(Y,{},Object(z.composeWithDevTools)(W.applyMiddleware.apply(void 0,Z)));localStorage.token&&(console.log("auth token is set in Appjs"),E(localStorage.token));var ee=function(){return Object(n.useEffect)(function(){$.dispatch(b())},[]),r.a.createElement(O.a,{store:$},r.a.createElement(l.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(S,null),r.a.createElement(s.b,{exact:!0,path:"/",component:A}),r.a.createElement("section",{className:"container"},r.a.createElement(B,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/register",component:q}),r.a.createElement(s.b,{exact:!0,path:"/login",component:_}),r.a.createElement(s.b,{exact:!0,path:"/profile",component:M}))))))};a(133),a(134),a(135);o.a.render(r.a.createElement(ee,null),document.getElementById("root"))},76:function(e,t,a){e.exports=a.p+"static/media/pexels-photo-346885.b76c72bf.jpeg"},80:function(e,t,a){e.exports=a.p+"static/media/pexels-photo-2108813.db8ad647.jpeg"},86:function(e,t,a){e.exports=a(136)}},[[86,1,2]]]);
//# sourceMappingURL=main.54334b34.chunk.js.map